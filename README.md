# S&P 500 섹터별 주가와 원유/금 시세 연동 분석 프로젝트

## 📌 프로젝트 개요

본 프로젝트는 **S&P 500 지수에 포함된 종목들의 섹터별 주식 가격**이 **국제 원유 및 금 시세**에 어떤 영향을 받는지를 분석하기 위한 데이터 엔지니어링 및 스트리밍 분석 시스템입니다.

### 🎯 목적
- 종목별 주식 가격 데이터를 실시간으로 수집 및 처리
- 원유와 금 시세 데이터를 함께 수집하여 비교 분석
- 섹터별로 시세 변화에 민감한 종목 탐색
- 실시간 파이프라인을 통해 지속적인 데이터 적재 및 시각화

---

## ⚙️ 기술 스택 및 구성 요소

| 구성 요소 | 설명 |
|------------|------|
| **PostgreSQL** | 소스 데이터베이스 (주식, 금, 원유 가격 저장) |
| **Kafka** | 분산 메시지 큐, 소스 데이터 스트리밍 처리 |
| **Python Producer** | PostgreSQL에서 Kafka로 데이터 전송 |
| **Spark Structured Streaming** | Kafka 메시지를 소비하여 실시간 데이터 처리 |
| **GCS (Google Cloud Storage)** | 처리된 데이터 저장소 |
| **BigQuery** | 분석용 데이터 웨어하우스 |
| **Looker Studio** | 시각화 및 대시보드 구성 |
| **Kubernetes (K8s)** | 각 Producer 및 Spark 실행을 위한 배포 환경 |

---

## 🏗️ 아키텍처 구성도


---

## 🔍 핵심 설계 포인트

- Kafka 토픽을 소스별로 분리 (`stock-prices`, `gold-prices`, `oil-prices`)
- `ticker`를 Kafka 메시지 key로 설정하여 동일 종목은 동일 파티션 → 순서 보장
- Spark는 topic 별로 실시간 소비하며, 전일 대비 변동률 계산 및 필터링
- 결과는 GCS + BigQuery에 저장 후 Looker에서 시각화
- Kubernetes 기반으로 각 Producer 및 Spark Job을 독립적으로 배포하여 안정성 확보

---

## ✅ 향후 확장 방향

- 종목별 변동률 기반 알림 시스템 (Slack 연동)
- 변동률 이상치 탐지용 머신러닝 모델 연계
- Sector별 민감도 랭킹 자동화 및 주기적 리포트화
